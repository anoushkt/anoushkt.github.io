<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->


  <title>eyeorg</title>
  <meta name="description" content="A website to visualise amp maps">

  <!-- Open Sans font -->
  <link href='//fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css'>


  <!-- Latest compiled and minified Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <!-- Bootstrap CSS w/ custom brand color -->
  <link href="/css/bootstrap.min.css" rel="stylesheet">

  <!-- Our own CSS tweaks -->
  <link href="/css/custom.css" rel="stylesheet">

  <!-- favicon -->
  <link rel="icon"
      type="image/png"
      href="">

  <!-- facebook shares -->
  <meta property="og:image" content="http://getfoodsniffer.com/wp-content/uploads/2018/10/free-logo-templates-sample-circular-wave-logo-template-1061-224.jpg" />

  <meta property="og:image:secure_url" content="http://getfoodsniffer.com/wp-content/uploads/2018/10/free-logo-templates-sample-circular-wave-logo-template-1061-224.jpg" />

</head>


  <body>

	<div class="container" style="margin-top: 10px; margin-bottom: 20px">
	<div class="row">

		<div class="col-sm-12">

			<nav class="navbar" role="navigation" style="margin-bottom: 0">
			  <div class="container-fluid">
				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header">
				  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				  </button>
				  <a class="navbar-brand" style="margin-top:-10px" href="/index.html"><img src="https://cdn3.iconfinder.com/data/icons/faticons/32/globe-01-512.png" height="40px"></a>
				</div>


				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				  <!-- LINKS (right) -->
				  <ul class="nav navbar-nav navbar-right">
					<li><a href="http://localhost:3000/articles">Home</a></li>
					<li><a href="http://localhost:3000/articles/new">Visualise</a></li>
					<li><a href="http://localhost:3000/articles/about">About</a></li>
				  </ul>
				</div><!-- /.navbar-collapse -->

			  </div><!-- /.container-fluid -->
			</nav><!-- navbar -->

			<hr style="margin-top: 5px; margin-bottom: 0px;">
		</div>  <!-- col -->

	</div>  <!-- row -->



	<!-- ALERTS -->
	<div class="row">
		<div class="col-md-12" id="alerts-container">
		</div>  <!-- col -->
	</div>  <!-- row -->

</div> <!-- container -->






  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<!-- bbq jquery plugin (for query string deparam function) -->
<script src="/js/jquery.ba-bbq.min.js"></script>

<!-- Latest compiled and minified Bootstrap JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>



<!-- Common js code -->
<script src="/js/common.js"></script>

<!-- page-specific scripts, if any -->



    <!-- Google analytics -->


<

<script>     function update(){
     // For each check box:
     d3.selectAll(".checkbox").each(function(d){
       cb = d3.select(this);
       grp = cb.property("value")
       // If the box is check, I show the group
       if(cb.property("checked")){
         svg.selectAll("."+grp).transition().duration(1000).style("opacity", 1).attr("r", function(d){if (d.protocol==document.querySelector('input[name="contact"]:checked').value)
         {return d.ampFactor ;}
         else {return 0;} } )
       // Otherwise I hide it
       }else{
         svg.selectAll("."+grp).transition().duration(1000).style("opacity", 0).attr("r", 0)
       }
     })
   }
</script>
<meta charset="utf-8">
<style>
.dropdown {
    padding: 20px 20px;
    font-size: 30px;
    border: none;
    width:120px;
   font-family: "Comic Sans MS", cursive, sans-serif;
   font-color: "white"
  position: absolute;
  left: 30px;
  top: 65px;
}
.dropdown-content {
  display: none;
 position: absolute;
 background-color: #f9f9f9;
 min-width: 175px;
 box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
 padding: 12px 16px;
 z-index: 1;
 font-size: 12px;
}
.dropdown:hover .dropdown-content {
  display: block;
}
</style>



      <script>
        $(function() {
    $('#chkfilter').on('keyup', function() {
        var query = this.value;

        $('[id^="country"]').each(function(i, elem) {
              if (elem.value.indexOf(query) != -1) {
                  $(this).closest('label').show();
              }else{
                  $(this).closest('label').hide();
              }
        });
    });

    });</script>

<input type="text" id="chkfilter" style="position:absolute; left:30px; top:110px;border: 3px solid #000000";>
<input type="text" id="checkamp" style="position:absolute; left:270px; top:110px;border: 3px solid #000000";">
<h1 style="position:absolute; left:70px; top:69px;font-size: 15px;">Countries</h1>
<h2 style="position:absolute; left:310px; top:69px;font-size: 15px;">Protocols</h1>

<div class="dropdown" style="position:absolute; left:50px; top:108px; max-height:500px;overflow:scroll;">
  <div class="dropdown-content" style="position:relative;top:35px;width:100px;overflow:scroll;">
    <label><input type="checkbox" class="checkbox" name="chk" id="country" value="China">China</label><br>
    <label><input type="checkbox" class="checkbox" name="chk" id="country" value="unitedKingdom">unitedKingdom</label><br>
    <label><input type="checkbox" class="checkbox" name="chk" id="country" value="unitedStates">unitedStates</label><br>
    <label><input type="checkbox" class="checkbox" name="chk" id="country" value="Philippines">Philippines</label><br>
    <label><input type="checkbox" class="checkbox" name="chk" id="country" value="Russia">Russia</label><br>
    <label><input type="checkbox" class="checkbox" name="chk" id="country" value="Chile">Chile</label><br>
      <label><input type="checkbox" class="checkbox" name="chk" id="country" value="Colombia">Colombia</label><br>
    <label><input type="checkbox" class="checkbox" name="chk" id="country" value="Indonesia">Indonesia</label><br>
    <label><input type="checkbox" class="checkbox" name="chk" id="country" value="Kyrgyzstan">Kyrgyzstan</label><br>
    <label><input type="checkbox" class="checkbox" name="chk" id="country" value="Romania">Romania</label><br>
    <label><input type="checkbox" class="checkbox" name="chk" id="country" value="southKorea">southKorea</label><br><br><br>



  </div>
</div>
<div class="dropdown" style="position:absolute; left:280px; top:98px;font-size: 30px;">

    <div class="dropdown-content" style="position:relative;top:45px;width:200px;">
    <input type="radio" id="contactChoice1"
     name="contact" value="dns" checked onclick="update()">
    <label for="contactChoice1">dns</label>
    <br>


    <input type="radio" id="contactChoice2"
     name="contact" value="dnsallfilter" onclick="update()">
    <label for="contactChoice2">dnsallfilter</label>
    <br>
    <input type="radio" id="contactChoice3"
     name="contact" value="ntpPrivate" onclick="update()">
    <label for="contactChoice3">ntpPrivate</label>
    <br>

      <input type="radio" id="contactChoice4"
       name="contact" value="chargen" onclick="update()">
      <label for="contactChoice4">chargen</label>

      <br><input type="radio" id="contactChoice5"
       name="contact" value="ssdp" onclick="update()">
      <label for="contactChoice5">ssdp</label>
      </div>


</div>

<script>
function myFunction() {update();
}
</script>
<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>



<!-- Create an element where the map will take place -->
<svg id="my_dataviz" width="1350" height="1000"></svg>
<script>
// The svg
var svg = d3.select("svg"),
    width = +svg.attr("width"),
    height = +svg.attr("height");
// Map and projection
var projection = d3.geoNaturalEarth()
    .scale(width / 1.3 / Math.PI)
    .translate([width / 2, height / 2])
  var markers = [{"name": "59.52.224.9", "ampFactor": 7.9545, "radius": 3.97725, "fillKey": 1, "latitude": 28.1938, "longitude": 115.7836, "city": "Jianguang", "country": "China", "protocol": "dns"}, {"name": "146.88.66.214", "ampFactor": 62.6061, "radius": 31.30305, "fillKey": 1, "latitude": 14.6477, "longitude": 121.0493, "city": "Quezon City", "country": "Philippines", "protocol": "dns"}, {"name": "220.247.172.229", "ampFactor": 0.0, "radius": 0.0, "fillKey": 1, "latitude": -6.1741, "longitude": 106.8296, "city": "Jakarta", "country": "Indonesia", "protocol": "dns"}, {"name": "107.154.51.107", "ampFactor": 4.197, "radius": 2.0985, "fillKey": 1, "latitude": 37.751, "longitude": -97.822, "city": null, "country": "unitedStates", "protocol": "dns"}, {"name": "166.62.58.44", "ampFactor": 10.4394, "radius": 5.2197, "fillKey": 1, "latitude": 33.6013, "longitude": -111.8867, "city": "Scottsdale", "country": "unitedStates", "protocol": "dns"}, {"name": "39.129.208.114", "ampFactor": 0.0, "radius": 0.0, "fillKey": 1, "latitude": 25.0389, "longitude": 102.7183, "city": "Kunming", "country": "China", "protocol": "dns"}, {"name": "221.7.103.25", "ampFactor": 8.1212, "radius": 4.0606, "fillKey": 1, "latitude": 29.5569, "longitude": 106.5531, "city": null, "country": "China", "protocol": "dns"}, {"name": "96.72.225.114", "ampFactor": 23.4545, "radius": 11.72725, "fillKey": 1, "latitude": 39.6192, "longitude": -85.4321, "city": "Rushville", "country": "unitedStates", "protocol": "dns"}, {"name": "213.145.139.30", "ampFactor": 18.1364, "radius": 9.0682, "fillKey": 1, "latitude": 41.0, "longitude": 75.0, "city": null, "country": "Kyrgyzstan", "protocol": "dns"}, {"name": "67.231.250.14", "ampFactor": 10.4394, "radius": 5.2197, "fillKey": 1, "latitude": 42.747, "longitude": -73.7527, "city": "Latham", "country": "unitedStates", "protocol": "dns"}, {"name": "89.238.165.20", "ampFactor": 20.5942, "radius": 10.2971, "fillKey": 1, "latitude": 51.4973, "longitude": -0.1553, "city": "London", "country": "unitedKingdom", "protocol": "dns"}, {"name": "217.10.200.62", "ampFactor": 18.1818, "radius": 9.0909, "fillKey": 1, "latitude": 44.4354, "longitude": 26.1033, "city": "Bucharest", "country": "Romania", "protocol": "dns"}, {"name": "8.46.206.164", "ampFactor": 23.4545, "radius": 11.72725, "fillKey": 1, "latitude": 40.2874, "longitude": -84.1622, "city": "Sidney", "country": "unitedStates", "protocol": "dns"}, {"name": "118.218.81.122", "ampFactor": 8.1818, "radius": 4.0909, "fillKey": 1, "latitude": 37.5112, "longitude": 126.97409999999999, "city": null, "country": "southKorea", "protocol": "dns"}, {"name": "64.2.160.190", "ampFactor": 23.4545, "radius": 11.72725, "fillKey": 1, "latitude": 37.751, "longitude": -97.822, "city": null, "country": "unitedStates", "protocol": "dns"}, {"name": "59.60.23.108", "ampFactor": 8.1818, "radius": 4.0909, "fillKey": 1, "latitude": 24.4798, "longitude": 118.0819, "city": null, "country": "China", "protocol": "dns"}, {"name": "201.184.40.48", "ampFactor": 0.0, "radius": 0.0, "fillKey": 1, "latitude": 3.4384, "longitude": -76.5232, "city": "Santiago de Cali", "country": "Colombia", "protocol": "dns"}, {"name": "45.56.85.215", "ampFactor": 1.4242, "radius": 0.7121, "fillKey": 1, "latitude": 37.5625, "longitude": -122.0004, "city": "Fremont", "country": "unitedStates", "protocol": "dns"}, {"name": "146.83.132.8", "ampFactor": 1.0, "radius": 0.5, "fillKey": 1, "latitude": -29.9533, "longitude": -71.3436, "city": "Coquimbo", "country": "Chile", "protocol": "dns"}, {"name": "220.248.87.98", "ampFactor": 0.0, "radius": 0.0, "fillKey": 1, "latitude": 31.0449, "longitude": 121.4012, "city": null, "country": "China", "protocol": "dns"}, {"name": "67.231.250.28", "ampFactor": 10.4394, "radius": 5.2197, "fillKey": 1, "latitude": 42.747, "longitude": -73.7527, "city": "Latham", "country": "unitedStates", "protocol": "dns"}, {"name": "96.71.229.141", "ampFactor": 1.4242, "radius": 0.7121, "fillKey": 1, "latitude": 36.317, "longitude": -119.3087, "city": "Visalia", "country": "unitedStates", "protocol": "dns"}, {"name": "201.187.102.185", "ampFactor": 10.4394, "radius": 5.2197, "fillKey": 1, "latitude": -33.4378, "longitude": -70.6503, "city": null, "country": "Chile", "protocol": "dns"}, {"name": "153.99.125.167", "ampFactor": 19.4848, "radius": 9.7424, "fillKey": 1, "latitude": 32.0617, "longitude": 118.7778, "city": null, "country": "China", "protocol": "dns"}, {"name": "61.240.23.66", "ampFactor": 8.0303, "radius": 4.01515, "fillKey": 1, "latitude": 34.7725, "longitude": 113.7266, "city": null, "country": "China", "protocol": "dns"}, {"name": "217.13.222.24", "ampFactor": 0.0, "radius": 0.0, "fillKey": 1, "latitude": 44.0486, "longitude": 43.0594, "city": "Pyatigorsk", "country": "Russia", "protocol": "dns"},{"name": "112.91.152.161", "ampFactor": 22.085714285714282, "radius": 11.042857142857141, "fillKey": "defaultBubble", "latitude": 23.1167, "longitude": 113.25, "city": null, "country": "China", "protocol": "dnsallfilter"}];
// Load external data and boot
d3.json("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson", function(data){
    // Draw the map
    svg.append("g")
        .selectAll("path")
        .data(data.features)
        .enter().append("path")
            .attr("fill", "#69b3a2")
            .attr("d", d3.geoPath()
                .projection(projection)
            )
            // Add circles:
                svg
                  .selectAll("myCircles")
                  .data(markers)
                  .enter()
                  .append("circle")
                    .attr("class" , function(d){ return d.country })
                    .attr("protocol" , function(d){ return d.protocol })
                    .attr("cx", function(d){ return projection([d.longitude, d.latitude])[0] })
                    .attr("cy", function(d){ return projection([d.longitude, d.latitude])[1] })
                    .attr("r", function(d){return d.ampFactor})
                    .style("fill", "#3697a")
                    .attr("stroke", "#b3697a")
                    .attr("stroke-width", 3)
                    .attr("fill-opacity", .4)
                    function update(){
                     // For each check box:
                     d3.selectAll(".checkbox").each(function(d){
                       cb = d3.select(this);
                       grp = cb.property("value")
                       // If the box is check, I show the group
                       if(cb.property("checked")){
                         svg.selectAll("."+grp).transition().duration(1000).style("opacity", 1).attr("r", function(d){if (d.protocol==document.querySelector('input[name="contact"]:checked').value)
                         {return d.ampFactor ;}
                         else {return 0;} } )
                       // Otherwise I hide it
                       }else{
                         svg.selectAll("."+grp).transition().duration(1000).style("opacity", 0).attr("r", 0)
                       }
                     })
                   }
                   // When a button change, I run the update function
                   d3.selectAll(".checkbox").on("change",update);
                   d3.selectAll(".checkbox").on("change",update);
                   // And I initialize it at the beginning
                   update()
})
</script>
